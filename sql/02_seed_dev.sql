BEGIN;

-- apps
INSERT INTO apps (id,key,name) VALUES
 ('00000000-0000-0000-0000-000000000001','workout-tracker','Workout Tracker'),
 ('00000000-0000-0000-0000-000000000002','nfl-pick-league','NFL Pick League')
ON CONFLICT DO NOTHING;

-- roles per app
INSERT INTO roles (id,app_id,code,level) VALUES
 ('00000000-0000-0000-0000-000000000a11','00000000-0000-0000-0000-000000000001','owner',100),
 ('00000000-0000-0000-0000-000000000a12','00000000-0000-0000-0000-000000000001','admin',90),
 ('00000000-0000-0000-0000-000000000a13','00000000-0000-0000-0000-000000000001','member',50),
 ('00000000-0000-0000-0000-000000000a14','00000000-0000-0000-0000-000000000001','viewer',10),
 ('00000000-0000-0000-0000-000000000b11','00000000-0000-0000-0000-000000000002','owner',100),
 ('00000000-0000-0000-0000-000000000b12','00000000-0000-0000-0000-000000000002','admin',90),
 ('00000000-0000-0000-0000-000000000b13','00000000-0000-0000-0000-000000000002','member',50),
 ('00000000-0000-0000-0000-000000000b14','00000000-0000-0000-0000-000000000002','viewer',10)
ON CONFLICT DO NOTHING;

-- users
INSERT INTO users (id,email,password_hash,display_name) VALUES
 ('00000000-0000-0000-0000-0000000000a1','owner@lukes-projects','dev-hash','Owner'),
 ('00000000-0000-0000-0000-0000000000a2','admin@lukes-project.com','dev-hash','Admin'),
 ('00000000-0000-0000-0000-0000000000a3','guest@lukes-projects.com','dev-hash','Guest')
ON CONFLICT DO NOTHING;

-- memberships (owner/admin/viewer in both apps)
INSERT INTO memberships (user_id,app_id,role_id) VALUES
 ('00000000-0000-0000-0000-0000000000a1','00000000-0000-0000-0000-000000000001','00000000-0000-0000-0000-000000000a11'),
 ('00000000-0000-0000-0000-0000000000a2','00000000-0000-0000-0000-000000000001','00000000-0000-0000-0000-000000000a12'),
 ('00000000-0000-0000-0000-0000000000a3','00000000-0000-0000-0000-000000000001','00000000-0000-0000-0000-000000000a14'),
 ('00000000-0000-0000-0000-0000000000a1','00000000-0000-0000-0000-000000000002','00000000-0000-0000-0000-000000000b11'),
 ('00000000-0000-0000-0000-0000000000a2','00000000-0000-0000-0000-000000000002','00000000-0000-0000-0000-000000000b12'),
 ('00000000-0000-0000-0000-0000000000a3','00000000-0000-0000-0000-000000000002','00000000-0000-0000-0000-000000000b14')
ON CONFLICT DO NOTHING;

-- dev sessions: generate token+hash once and paste (below is example)
-- generate in shell:
-- node -e "const c=require('crypto');const t=c.randomBytes(32).toString('base64url');const h=c.createHash('sha256').update(t).digest('hex');console.log({token:t,hash:h})"
INSERT INTO sessions (id,token_hash,user_id,expires_at)
VALUES
 ('11111111-1111-1111-1111-111111111111','aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa','00000000-0000-0000-0000-0000000000a1', now() + interval '7 days'),
 ('22222222-2222-2222-2222-222222222222','bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb','00000000-0000-0000-0000-0000000000a2', now() + interval '7 days'),
 ('33333333-3333-3333-3333-333333333333','cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc','00000000-0000-0000-0000-0000000000a3', now() + interval '7 days')
ON CONFLICT DO NOTHING;

COMMIT;
